<section id="catalogs" class="flex flex-col h-full">
  <div class="flex justify-end items-center mb-5">
    <button pButton size="small" icon="ph ph-plus" label="New" (click)="openDialog()"></button>
  </div>

  @if (!loading() && !error() && collections().length) {
  <div class="flex flex-col justify-between h-full">
    <div class="grid grid-cols-4 gap-2 mb-5">
      @for (collection of collections(); track collection.id) {
      <app-card-collection-card [collection]="collection" (deleted)="reload()" />
      }
    </div>
    <app-pagination [metadata]="metadata()!" [page]="page()" [pageSize]="pageSize()" (onPageChange)="reload($event)" />
  </div>
  }

  @if (loading()) {
  <div class="flex flex-col justify-center items-center h-full">
    <app-loading-spinner />
  </div>
  }

  @if (error()) {
  <div class="flex flex-col justify-center items-center h-full">
    <p-message severity="error" [text]="error()!"></p-message>
  </div>
  }

  @if (!loading() && !error() && collections().length === 0) {
  <div class="flex flex-col justify-center items-center h-full">
    <i class="ph ph-empty" style="font-size: 32px"></i>
    <span class="font-semibold">No collections found.</span>
    <span>Start by creating a <span class="text-yellow-300">New</span> one</span>
  </div>
  }
</section>

<app-create-card-collection-form [visible]="dialogOpen()" (closed)="closeDialog($event)" (created)="reload()" />
<p-confirmDialog></p-confirmDialog>